<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Todo App</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    input[type="text"], select { padding: 5px; margin: 5px; }
    button { padding: 5px 10px; margin: 5px; }
    .todo-item { display: flex; align-items: center; margin: 5px 0; }
    .todo-item.completed span { text-decoration: line-through; color: gray; }
    .btn-delete { background-color: red; color: white; border: none; padding: 5px 10px; margin-left: 10px; cursor: pointer; }
    .btn-complete { background-color: blueviolet; color: white; border: none; padding: 5px 10px; margin-left: 5px; cursor: pointer; }
  </style>
</head>
<body>

  <h2>Todo Web</h2>
  
  <input type="text" id="searchInput" placeholder="Search" />
    <select id="listFilter">
    <option value="all">All</option>
    <option value="list1">List 1</option>
    <option value="list2">List 2</option>
  </select>
  
  <br><br/>
    <input type="text" id="newListInput" placeholder="Yeni liste adı" />
    <button onclick="addNewList()">Liste Ekle</button>
  <br/><br/>
  
  <input type="text" id="newTodoInput" placeholder="Yeni todo" />
  <select id="todoListSelect">
    <option value="list1">List 1</option>
    <option value="list2">List 2</option>
  </select>
  <button onclick="addNewTodo()">Todo Ekle</button>

  <select id="statusFilter">
    <option value="all">All</option>
    <option value="completed">Completed</option>
    <option value="pending">Pending</option>
  </select>
  <button onclick="applyFilters()">Search</button>
  
  <div id="todoContainer"></div>

  <script>
    const todos = [
      { id: 1, text: 'Todo 1', completed: false, list: 'list1' },
      { id: 2, text: 'Todo 2', completed: false, list: 'list2' },
      { id: 3, text: 'Todo 3', completed: true, list: 'list1' },
      { id: 4, text: 'Todo 4', completed: false, list: 'list2' },
      { id: 5, text: 'Todo 5', completed: false, list: 'list2' },
      { id: 6, text: 'Todo 6', completed: true, list: 'list2' },
      { id: 7, text: 'Todo 7', completed: false, list: 'list1' },
      { id: 8, text: 'Todo 8', completed: false, list: 'list2' },
      { id: 9, text: 'Todo 9', completed: true, list: 'list2' },
      { id: 10, text: 'Todo 10', completed: false, list: 'list1' },
    ];

    function renderTodos(filtered = todos) {
      const container = document.getElementById("todoContainer");
      container.innerHTML = '';
      filtered.forEach(todo => {
        const div = document.createElement("div");
        div.className = "todo-item" + (todo.completed ? " completed" : "");
        div.innerHTML = `
          <input type="checkbox" ${todo.completed ? "checked" : ""} onchange="toggleComplete(${todo.id})"/>
          <span>${todo.text}</span>
          <button class="btn-delete" onclick="deleteTodo(${todo.id})">Delete</button>
          <button class="btn-complete" onclick="toggleComplete(${todo.id})">Complete</button>
        `;
        container.appendChild(div);
      });
    }

    function toggleComplete(id) {
      const todo = todos.find(t => t.id === id);
      if (todo) {
        todo.completed = !todo.completed;
        setTimeout(() => {
          applyFilters();
        }, 0);
      }
    }

    function deleteTodo(id) {
    const todo = todos.find(t => t.id === id);
    if (!todo) return;

    if (!todo.completed) {
      const confirmDelete = confirm("Uyarı! Bu todoyu daha tamamlamadınız. Silmek istediğinizden emin misiniz?");
      if (!confirmDelete) return;
    }

    const index = todos.findIndex(t => t.id === id);
    if (index > -1) {
      todos.splice(index, 1);
      applyFilters();
    }
    }

    function addNewList() {
      const input = document.getElementById("newListInput");
      const listName = input.value.trim();
      if (!listName) return;

      const listFilter = document.getElementById("listFilter");
      const newOption = document.createElement("option");
      newOption.value = listName;
      newOption.textContent = listName;
      listFilter.appendChild(newOption);

      const todoListSelect = document.getElementById("todoListSelect");
      const newOption2 = document.createElement("option");
      newOption2.value = listName;
      newOption2.textContent = listName;
      todoListSelect.appendChild(newOption2);

      input.value = "";
  }

  function addNewTodo() {
    const text = document.getElementById("newTodoInput").value.trim();
    const list = document.getElementById("todoListSelect").value;

    if (!text) return;

    todos.push({
      id: Date.now(), 
      text: text,
      completed: false,
      list: list
    });

    document.getElementById("newTodoInput").value = "";
    applyFilters();
  }



  function applyFilters() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const listFilter = document.getElementById("listFilter").value;
    const statusFilter = document.getElementById("statusFilter").value;

    const filtered = todos.filter(todo => {
    const matchesSearch = todo.text.toLowerCase().includes(search);
    const matchesList = listFilter === "all" || todo.list === listFilter;
    const matchesStatus =
    statusFilter === "all" ||
      (statusFilter === "completed" && todo.completed) ||
      (statusFilter === "pending" && !todo.completed);
    return matchesSearch && matchesList && matchesStatus;
    });

    renderTodos(filtered);
  }
    
  renderTodos();
</script>
</body>
</html>
